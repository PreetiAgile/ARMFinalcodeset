/*http://demo.agile-labs.com/minZIP/*//*version=3.9.1*/var applstJson="",handlerType="";function OpenSignIn(){window.document.location.href="Signin.aspx"}function TestConnection(){var e=$("#ddldbtype").val();if(""==e)return $("#ddldbtype").focus(),showAlertDialog("error","Database name should not be left empty."),!1;var n=$("#ddldbversion").val();return"ms sql"==e.toLowerCase()&&""==n?($("#ddldbversion").focus(),showAlertDialog("error","Database verion should not be left empty."),!1):""==$("#txtccname").val()?($("#txtccname").focus(),showAlertDialog("error","Connection name should not be left empty."),!1):""==$("#txtusername").val()?($("#txtusername").focus(),showAlertDialog("error","User name should not be left empty."),!1):""==$("#txtPassword").val()?($("#txtPassword").focus(),showAlertDialog("error","Password should not be left empty."),!1):void TestConnectionWs()}function TestConnectionWs(){$.ajax({url:"Config.aspx/AppTestConnection",type:"POST",cache:!1,async:!0,data:JSON.stringify({ddldbtype:$("#ddldbtype").val(),ddldbversion:$("#ddldbversion").val(),ddldriver:$("#ddldriver").val(),txtccname:$("#txtccname").val(),txtusername:$("#txtusername").val(),txtPassword:$("#txtPassword").val()}),dataType:"json",contentType:"application/json",success:function(e){if(""!=e.d){var n=$.parseJSON(e.d);"true"==n.result[0].result?(showAlertDialog("success","Test Connection was Successful."),EnableApplyConnection()):showAlertDialog("error",n.result[0].error.msg)}else showAlertDialog("error",e.d)},error:function(e){showAlertDialog("error",e)}})}function EnableApplyConnection(){$("#btnApply").removeAttr("disabled").removeClass("btndisable"),$("#btnChangePassword").removeAttr("disabled").removeClass("btndisable")}function applyconnection(){var e=$("#txtNewConName").val();return""==e?($("#txtNewConName").focus(),showAlertDialog("error","Connection name should not be left empty."),!1):!!new RegExp("^[a-zA-Z0-9]+$").test(e)||($("#txtNewConName").focus(),showAlertDialog("error","Invalid Name - Special characters not allowed."),!1)}function applydbpwdconnection(){var e=$("#txtNewPassword").val();if(""==e)return $("#txtNewPassword").focus(),showAlertDialog("error","Password can not be empty."),!1;var n=$("#txtConfirmPassword").val();return""==n?($("#txtConfirmPassword").focus(),showAlertDialog("error","Confirm Password can not be empty."),!1):e==n||($("#txtNewPassword").focus(),showAlertDialog("error","The password you entered did not match."),!1)}function SuccApplyConnection(e,n){"success"==e?showAlertDialog("success","Connection is created successful."):showAlertDialog("error","Connection Name already exists.")}function SuccPasswordChange(e,n){"success"==e?showAlertDialog("success",n):showAlertDialog("error",n)}function setProjectImages(e){var n="../images/loginlogo.png",o="../AxpImages/login-img.png",t="../AxpImages/login-img.png",a=$(".file-upload[data-type=logo]").parent().parent().find(".profile-pic"),l=$(".file-upload[data-type=webbg]").parent().parent().find(".profile-pic"),s=$(".file-upload[data-type=mobbg]").parent().parent().find(".profile-pic");e?getProjectAppLogo(e,async=!0,function(e){if(null!=e&&e.d){var r=JSON.parse(e.d),d=r.logo,i=r.webbg,c=r.mobbg,p=!1;i&&!c&&(c=i,p=!0),a.prop("src",d?"".concat(d,"?v=").concat((new Date).getTime()):n),l.prop("src",i||o),s.prop("src",c||t),d?a.parent().find(".delete-button").removeClass("d-none"):a.parent().find(".delete-button").addClass("d-none"),i?l.parent().find(".delete-button").removeClass("d-none"):l.parent().find(".delete-button").addClass("d-none"),c&&!p?s.parent().find(".delete-button").removeClass("d-none"):s.parent().find(".delete-button").addClass("d-none")}else a.prop("src",n),l.prop("src",o),s.prop("src",t),a.parent().find(".delete-button").addClass("d-none"),l.parent().find(".delete-button").addClass("d-none"),s.parent().find(".delete-button").addClass("d-none")},function(e){a.prop("src",n),l.prop("src",o),s.prop("src",t),a.parent().find(".delete-button").addClass("d-none"),l.parent().find(".delete-button").addClass("d-none"),s.parent().find(".delete-button").addClass("d-none")}):(a.prop("src",n),l.prop("src",o),s.prop("src",t),a.nextAll(".delete-button").addClass("hide"),l.nextAll(".delete-button").addClass("hide"),s.nextAll(".delete-button").addClass("hide"))}function licActivateCheck(){$("#btnActivate").hasClass("disabledButton")||(""==$("#txtlicappkey").val()?($("#txtlicappkey").focus(),showAlertDialog("error","Please enter license key provided by Agile Labs...")):$("#btnActivateasp").trigger("click"))}function licRefreshCheck(){$("#btnRefresh").hasClass("disabledButton")||$("#btnRefreshasp").trigger("click")}function licTrialCheck(){$("#btnTrial").hasClass("disabledButton")||$("#btnTrialasp").trigger("click")}function offlinelicDownload(){""==$("#txtlicofflinekey").val()?($("#txtlicofflinekey").focus(),showAlertDialog("error","Please enter license key provided by Agile Labs...")):$("#btnDownloadasp").trigger("click")}function LicActivationSucc(e,n){"success"==e?(showAlertDialog("success",n),setTimeout(function(){var e=window.document.location.href;window.document.location.href=e},300)):showAlertDialog("error",n)}function LicDownloadSucc(e,n){"success"==e?(showAlertDialog("success",n),$("#btndownloadfile").trigger("click")):showAlertDialog("error",n)}function closeUploadDialog(){$("#btnFileUpload").prop("disabled",!1),$("#filMyFile").val(""),$("#lblnofilename").text(""),$("#myModalLicUpload").hide()}function uploadLogo(e){for(var n=e.target,o=n.files,t=new FormData,a=0;a<o.length;a++)t.append(o[a].name,o[a]);var l,s=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx"));$("#axSelectProj").val()?$.ajax({url:s+"ProjectImageUploadHandler.ashx?proj=".concat($("#axSelectProj").val(),"&type=").concat((null==n?void 0:null===(l=n.dataset)||void 0===l?void 0:l.type)||"","&handlertype=").concat(handlerType),type:"POST",data:t,contentType:!1,processData:!1,success:function(e){handlerType="upload",e.indexOf("success")>-1?(setProjectImages($("#axSelectProj").val()),showAlertDialog("success",e)):e.indexOf("size")>-1||e.indexOf("select")?showAlertDialog("warning",e):(e.indexOf("error"),showAlertDialog("error",e)),$(n).val("")},error:function(e){handlerType="upload",showAlertDialog("error",e.statusText),$(n).val("")}}):(handlerType="upload",showAlertDialog("error","Project Name should be selected"))}function AuthenticateUser(){return""==$("#txtAuthUsername").val()?($("#txtAuthUsername").focus(),showAlertDialog("error","User name should not be left empty."),!1):""==$("#txtAuthPwd").val()?($("#txtAuthPwd").focus(),showAlertDialog("error","Password should not be left empty."),!1):void $.ajax({url:"Config.aspx/UserAuthentication",type:"POST",cache:!1,async:!0,data:JSON.stringify({AuthUsername:$("#txtAuthUsername").val(),AuthPwd:$("#txtAuthPwd").val()}),dataType:"json",contentType:"application/json",success:function(e){if($("#configbody").removeClass("m-auto"),$("#main_body").removeAttr("style"),""!=e.d){var n=window.document.location.href;if(n.indexOf("?")>-1){var o=n.split("?")[1];if(o.indexOf("auth=")>-1){var t="";o.split("&").forEach(function(e){-1==e.indexOf("auth=")&&(t+=e+"&")}),window.document.location.href="config.aspx?"+t+"auth="+e.d}else window.document.location.href=n+"&auth="+e.d}else window.document.location.href="config.aspx?auth="+e.d}else showAlertDialog("error","Incorrect credentials. please try again!")},error:function(e){showAlertDialog("error",e)}})}function initUiPanel(){$("#axSelectProj").val(selProj),setProjectImages(selProj);$("#lstconnection option").toArray().map(function(e){return{label:e.value,value:e.value,link:""}});$("#axSelectProj").select2({data:applstJson})}$j(document).ready(function(){if($("#lstconnection").select2(),$("#ddldbtype").select2(),$("#ddldbversion").select2(),$("#lstconnection").val(selProj).trigger("change"),$("#btnaddcon").click(function(){$("#lstconnection").val("").trigger("change"),$("#ddldbtype").val("").trigger("change"),$("#ddldbversion").val("").trigger("change")}),"false"==IsLicExist?($("#dvlicmessage").show(),$("#btnRefresh").hide(),$("#btnActivate").show(),$("#btnTrial").show(),$(".licActOptions").show(),$("#dvdbConnection").addClass("disabledDiv")):($("#dvlicmessage").hide(),$(".licActOptions").hide(),$("#btnRefresh").show(),$("#btnActivate").hide(),$("#btnTrial").hide(),$("#dvdbConnection").removeClass("disabledDiv")),$("#ddldbversion").val(a).prop("disabled",!0),applist=ReverseCheckSpecialChars(applist),""!=applist){var e=parseXml(applist);if(applstJson=JSON.parse(xml2json(e,"")),""!=selProj&&""!=applstJson){$("#lstconnection").val(selProj).focus();var n=applstJson.connections[selProj].db,o=applstJson.connections[selProj].dbcon,t=applstJson.connections[selProj].dbuser,a=null==applstJson.connections[selProj].version?"":applstJson.connections[selProj].version,l=applstJson.connections[selProj].driver;$("#lblconname").text(selProj),$("#ddldbtype").val(n).trigger("change"),"MS SQL"!=n.toString()&&$(".databasever").addClass("d-none"),""!=a?$("#ddldbversion").val(a).prop("disabled",!1):$("#ddldbversion").val(a).prop("disabled",!0),$("#txtccname").val(o),$("#txtusername").val(t),$("#ddldriver").val(l)}else if(""!=applstJson){var s=$("#lstconnection option:first").val();if(void 0!==s){$("#lstconnection").val(s).focus();n=applstJson.connections[s].db,o=applstJson.connections[s].dbcon,t=applstJson.connections[s].dbuser,a=null==applstJson.connections[s].version?"":applstJson.connections[s].version,l=applstJson.connections[s].driver;$("#lblconname").text(s),$("#ddldbtype").val(n).trigger("change"),""!=a?$("#ddldbversion").val(a).prop("disabled",!1):$("#ddldbversion").val(a).prop("disabled",!0),$("#txtccname").val(o),$("#txtusername").val(t),$("#ddldriver").val(l)}}}$(document).on("click",".upload-button",function(e){try{if(""==$("#axSelectProj").val())return showAlertDialog("warning","Please Select UI Configuration Project"),$("#axSelectProj").focus(),e.preventDefault(),e.stopPropagation(),!1;handlerType="upload",$(e.currentTarget).nextAll(".file-upload").trigger("click")}catch(n){}}),$(document).on("click",".delete-button",function(e){try{if(""==$("#axSelectProj").val())return showAlertDialog("warning","Please Select UI Configuration Project"),$("#axSelectProj").focus(),e.preventDefault(),e.stopPropagation(),!1;handlerType="delete",$(e.currentTarget).parent().find(".file-upload").trigger("change")}catch(n){}}),$(document).on("change",".file-upload",function(e){uploadLogo(e)}),$("#ddlIsNewConnection").val("new"),$("#txtNewConName").val(""),$("#demo").on("hide.bs.collapse",function(){$(".licInfoAccordion").html('<span class="material-icons">expand_more</span>')}),$("#demo").on("show.bs.collapse",function(){$(".licInfoAccordion").html('<span class="material-icons">expand_less</span>')}),"false"==IsLicExist&&($("#demo").addClass("in"),$(".licInfoAccordion").html('<span class="material-icons">expand_less</span>')),$("#filMyFile").bind({change:function(){var e=$("#filMyFile").val();/^\s*$/.test(e)?($(".file-upload").removeClass("active"),$("#lblfuerror").text("No file chosen...")):$(".file-upload").addClass("active");var n=e.split(".").pop().toLowerCase();-1==$.inArray(n,["lic"])?($("#btnFileUpload").prop("disabled",!0),$("#lblfuerror").text("Invalid file format.")):($("#btnFileUpload").prop("disabled",!1),$("#lblfuerror").text(""));var o=$("#filMyFile")[0].files;o.length>0&&$("#lblnofilename").text(o[0].name)}}),"true"==authPopup&&$("#myModalAuth").show(),initUiPanel()}),$j(document).on("click","#lstconnection option",function(e){var n=$(this).val();if(""!=applstJson){var o=applstJson.connections[n].db,t=applstJson.connections[n].dbcon,a=applstJson.connections[n].dbuser,l=null==applstJson.connections[n].version?"":applstJson.connections[n].version,s=applstJson.connections[n].driver;$("#lblconname").text(n),$("#ddldbtype").val(o),""!=o&&$("#ddldbtype").val(o).trigger("change"),""!=l?($("#ddldbversion").val(l).prop("disabled",!1),$("#ddldbversion").val(l).trigger("change")):$("#ddldbversion").val(l).prop("disabled",!0),$("#txtccname").val(t),$("#txtusername").val(a),$("#ddldriver").val(s)}}),$j(document).on("change","#lstconnection",function(e){var n=$(this).val();if(""!=applstJson){var o=applstJson.connections[n].db,t=applstJson.connections[n].dbcon,a=applstJson.connections[n].dbuser,l=null==applstJson.connections[n].version?"":applstJson.connections[n].version,s=applstJson.connections[n].driver;$("#lblconname").text(n),$("#ddldbtype").val(o),$("#ddldbtype").trigger("change"),""!=o&&$("#ddldbtype").val(o).trigger("change"),"ms sql"!=o.toString().toLowerCase()?($("#ddldbversion").val("").trigger("change"),$(".databasever").addClass("d-none")):$(".databasever").removeClass("d-none"),""!=l?($("#ddldbversion").val(l).prop("disabled",!1),$("#ddldbversion").val(l).trigger("change")):$("#ddldbversion").val(l).prop("disabled",!0),$("#txtccname").val(t),$("#txtusername").val(a),$("#ddldriver").val(s)}}),$j(document).on("click","#btnApply",function(e){null==$("#lstconnection").val()||""==$("#lstconnection").val()?($("#ddlIsNewConnection").val("new"),$("#myModal").modal("show")):($("#ddlIsNewConnection").val("old"),$("#txtNewConName").val($("#lstconnection").val()),$("#btnok").click())}),$j(document).on("click","#btnChangePassword",function(e){$("#myModaldbpassword").modal("show")}),$j(document).on("click","#btnCancel",function(e){window.document.location.href="signin.aspx"}),$j(document).on("click","#btnaddcon",function(e){$("#ddldbtype").prop("selectedIndex",0),$("#ddldbversion").prop("selectedIndex",0).prop("disabled",!0),$(".databasever").removeClass("d-none"),$("#ddldriver").prop("selectedIndex",0),$("#lblconname").text(""),$("#txtccname").val(""),$("#txtusername").val(""),$("#lstconnection").val(""),$("#txtPassword").val(""),$("#txtNewPassword").val(""),$("#txtConfirmPassword").val("")}),$j(document).on("click","#btncdelete",function(e){var conDelete=$.confirm({closeIcon:!1,title:"Confirm",escapeKey:"buttonB",theme:"modern",onContentReady:function(){disableBackDrop("bind")},content:eval(callParent("lcm[512]")),buttons:{buttonA:{text:eval(callParent("lcm[279]")),btnClass:"btn btn-primary",action:function(){$j("#btndelete").click()}},buttonB:{text:eval(callParent("lcm[280]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy")}}}})}),$j(document).on("change","#ddldbtype",function(e){"MS SQL"==$(this).val()?($("#ddldbversion").prop("disabled",!1),$("#ddldriver").val("ado")):($("#ddldbversion").val("").prop("disabled",!0),$("#ddldriver").val("dbx"))}),$j(document).on("click","#btnlicactivation",function(e){window.document.location.href="licactivation.aspx"}),$j(document).on("click","#btnnewcancel,#myModalclose",function(e){$("#myModal").hide(),$("#btnApply").attr("disabled",!0).addClass("btndisable"),$("#btnChangePassword").attr("disabled",!0).addClass("btndisable")}),$j(document).on("click","#btndbpwdcancel,#myModaldbpasswordclose",function(e){$("#myModaldbpassword").hide(),$("#btnApply").attr("disabled",!0).addClass("btndisable"),$("#btnChangePassword").attr("disabled",!0).addClass("btndisable")}),$j(document).on("click","#btnUpload",function(e){$("#myModalLicUpload").show()}),$j(document).on("change","#rbllictype input",function(e){switch($(this).val()){case"offline":$("#dvOffline").show(),$("#dvOnline").hide();break;default:$("#dvOffline").hide(),$("#dvOnline").show()}}),$j(document).on("click","#btnAuthCancel,#myModalAuthClose",function(e){window.document.location.href="signin.aspx"});